{{ define "main" }}

<!-- Hero Section -->
<section class="hero" style="background: var(--oxford-blue); color: var(--white);">
  <div class="container">
    <div class="hero-content">
      <div class="hero-text animate-fade-in">
        <nav style="margin-bottom: 1rem; font-size: 0.9rem;">
          <a href="{{ "workflows/" | relURL }}" style="color: rgba(255,255,255,0.8); text-decoration: none;">‚Üê All Workflows</a>
        </nav>
        
        {{ if .Params.featured }}
          <div style="margin-bottom: 1rem;">
            <span style="background: var(--gamboge); padding: 6px 12px; border-radius: 999px; font-size: 0.8rem; font-weight: 600; color: var(--white);">‚ú® FEATURED WORKFLOW</span>
          </div>
        {{ end }}
        
        <h1>{{ .Title }}</h1>
        <p class="subtitle">{{ .Description }}</p>
        
        {{ if .Params.tags }}
          <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 1rem 0;">
            {{ range .Params.tags }}
              <span style="background: var(--azure); color: white; padding: 4px 12px; border-radius: 999px; font-size: 0.8rem;">{{ . }}</span>
            {{ end }}
          </div>
        {{ end }}
        
        <div class="stats-grid" style="margin-top: 2rem;">
          <div class="stat-card" style="background: rgba(255,255,255,0.1); border: none;">
            <div class="stat-label">Difficulty</div>
            <div class="stat-number" style="font-size: 1.2rem;">
              {{ if eq (.Params.difficulty | lower) "easy" }}üü¢{{ else if eq (.Params.difficulty | lower) "intermediate" }}üü°{{ else }}üî¥{{ end }}
              {{ .Params.difficulty }}
            </div>
          </div>
          
          {{ with .Params.estimated_time }}
          <div class="stat-card" style="background: rgba(255,255,255,0.1); border: none;">
            <div class="stat-label">Time Required</div>
            <div class="stat-number" style="font-size: 1.2rem;">‚è± {{ . }}</div>
          </div>
          {{ end }}
          
          {{ with .Params.popularity }}
          <div class="stat-card" style="background: rgba(255,255,255,0.1); border: none;">
            <div class="stat-label">Popularity</div>
            <div class="stat-number" style="font-size: 1.2rem;">üî• {{ . }}%</div>
          </div>
          {{ end }}
          
          <div class="stat-card" style="background: rgba(255,255,255,0.1); border: none;">
            <div class="stat-label">Last Updated</div>
            <div class="stat-number" style="font-size: 1.2rem;">üìÖ {{ .Date.Format "Jan 2" }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Starter Prompt Section -->
{{ with .Params.starter_prompt }}
<section class="about">
  <div class="container">
    <div class="highlight-box" style="position: relative;">
      <h2 style="margin-top: 0;">üöÄ Starter Prompt</h2>
      <p>Copy this prompt to get started immediately:</p>
      <pre style="background: var(--light-gray); padding: 1.5rem; border-radius: 8px; overflow-x: auto; border-left: 4px solid var(--azure); white-space: pre-wrap; font-family: 'Courier New', monospace; line-height: 1.5; margin: 1rem 0;"><code>{{ . }}</code></pre>
      <button onclick="copyStarterPrompt()" style="position: absolute; top: 1rem; right: 1rem; background: var(--azure); color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">üìã Copy Prompt</button>
    </div>
  </div>
</section>
{{ end }}

<!-- Prerequisites -->
{{ with .Params.prerequisites }}
<section class="services">
  <div class="container">
    <div class="section-header">
      <h2>üìã Prerequisites</h2>
      <p>Before starting this workflow, make sure you have:</p>
    </div>
    <div class="feature-list">
      {{ range . }}
        <div class="feature-item">
          <h4>‚úÖ {{ . }}</h4>
        </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

<!-- Tools Needed -->
{{ with .Params.tools_needed }}
<section class="about">
  <div class="container">
    <div class="section-header">
      <h2>üõ† Tools & Resources Needed</h2>
    </div>
    <div class="grid-3">
      {{ range . }}
        <div class="card">
          <div class="card-content">
            <h4>‚úÖ {{ . }}</h4>
          </div>
        </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

<!-- Main Content -->
<section class="about">
  <div class="container">
    {{ .Content }}
  </div>
</section>

<!-- Implementation Checklist -->
<section class="services">
  <div class="container">
    <div class="highlight-box">
      <h3>üìù Quick Implementation Checklist</h3>
      <p>Use this checklist to track your progress:</p>
      <ul class="visual-checklist">
        <li>Copy and customize the starter prompt</li>
        <li>Gather all required tools and resources</li>
        <li>Follow the step-by-step implementation guide</li>
        <li>Test the workflow with a sample project</li>
        <li>Document your customizations for future use</li>
        <li>Share feedback or questions in the community</li>
      </ul>
    </div>
  </div>
</section>

<!-- Related Workflows -->
<section class="services">
  <div class="container">
    <div class="section-header">
      <h2>üîó Related Workflows</h2>
      <p>These workflows work well together or solve similar challenges:</p>
    </div>
    
    <div class="grid-3">
      {{ $currentTitle := .Title }}
      {{ range first 3 (where .Site.Pages "Section" "workflows") }}
        {{ if ne .Title $currentTitle }}
          <div class="card">
            <div class="card-content">
              <div class="card-icon icon-robot"></div>
              <h3>{{ .Title }}</h3>
              <p>{{ .Description | truncate 100 }}</p>
              {{ if .Params.difficulty }}
                <div style="margin-top: 1rem;">
                  <span style="font-size: 0.8rem; padding: 0.25rem 0.5rem; border-radius: 20px; background: var(--light-gray); color: var(--charcoal);">{{ .Params.difficulty }}</span>
                  {{ with .Params.estimated_time }}
                    <span style="font-size: 0.8rem; padding: 0.25rem 0.5rem; border-radius: 20px; background: var(--light-gray); color: var(--charcoal); margin-left: 0.5rem;">{{ . }}</span>
                  {{ end }}
                </div>
              {{ end }}
            </div>
            <div class="card-footer">
              <a href="{{ .RelPermalink }}" class="card-link">View Workflow ‚Üí</a>
            </div>
          </div>
        {{ end }}
      {{ end }}
    </div>
    
    <div style="text-align: center; margin-top: 2rem;">
      <a href="{{ "workflows/" | relURL }}" class="btn btn-secondary">View All Workflows</a>
    </div>
  </div>
</section>

<!-- Navigation -->
<section class="about">
  <div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center; padding: 2rem 0; border-top: 1px solid var(--border-gray);">
      <div>
        {{ with .PrevInSection }}
          <a href="{{ .RelPermalink }}" class="btn btn-secondary">‚Üê {{ .Title | truncate 30 }}</a>
        {{ end }}
      </div>
      <div>
        <a href="{{ "workflows/" | relURL }}" class="btn btn-primary">All Workflows</a>
      </div>
      <div>
        {{ with .NextInSection }}
          <a href="{{ .RelPermalink }}" class="btn btn-secondary">{{ .Title | truncate 30 }} ‚Üí</a>
        {{ end }}
      </div>
    </div>
  </div>
</section>

<!-- Newsletter CTA -->
{{ partial "newsletter.html" (dict "title" "Get Weekly AI Workflows" "subtitle" "New workflows, prompts, and implementation tips delivered to your inbox every Tuesday." "placeholder" "you@company.com") }}

{{ end }}

{{ define "scripts" }}
<script>
  // Copy starter prompt functionality
  function copyStarterPrompt() {
    const promptText = document.querySelector('.highlight-box pre code').textContent;
    
    navigator.clipboard.writeText(promptText).then(function() {
      const button = event.target;
      const originalText = button.innerHTML;
      button.innerHTML = '‚úÖ Copied!';
      button.style.background = '#10b981';
      
      setTimeout(function() {
        button.innerHTML = originalText;
        button.style.background = 'var(--azure)';
      }, 2000);
    }).catch(function() {
      alert('Could not copy to clipboard. Please select and copy manually.');
    });
  }
</script>
{{ end }}