{{ define "main" }}
<!-- Hero Section -->
<section class="hero"{{ if .Params.hero_image }} style="background-image: linear-gradient(rgba(10, 37, 64, 0.7), rgba(10, 37, 64, 0.7)), url('{{ .Params.hero_image }}'); background-size: cover; background-position: center center; background-attachment: fixed;"{{ end }}>
    <div class="container">
        <div class="hero-content">
            <div class="hero-text animate-fade-in">
                <h1>{{ .Title | default "Clarity. Strategy. Systems." | markdownify }}</h1>
                <p class="subtitle">{{ .Description | default "I help professional service and tech-enabled businesses create clear, consistent, and cost-effective marketing systems — powered by fundamentals, AI, and smart execution." }}</p>
                <div class="btn-group">
                    <a href="{{ "contact/" | relURL }}" class="btn btn-primary">Work With Me</a>
                    <a href="#newsletter" class="btn btn-secondary">Join My Newsletter</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- About Section -->
<section id="about" class="about">
    <div class="container">
        <div class="about-content">
            <div class="about-image">
                {{ if .Params.about.image }}
                    <img src="{{ .Params.about.image | relURL }}" alt="{{ .Params.about.name | default "Anoop Kurup" }}" class="profile-image">
                {{ else }}
                    <div class="image-placeholder">
                        <span class="initials">{{ .Params.about.initials | default "AK" }}</span>
                    </div>
                {{ end }}
            </div>
            <div class="about-text">
                <h2>{{ .Params.about.title | default "About Me" }}</h2>
                {{ .Params.about.content | default "I'm Anoop Kurup — a strategist, consultant, and builder. Over the years, I've worked with founders of knowledge services, technical services, and consulting companies to simplify lead generation and marketing." | markdownify }}
                <a href="{{ "about/" | relURL }}" class="card-link">Read My Story →</a>
            </div>
        </div>
    </div>
</section>

<!-- Who I Work With -->
<section class="audience">
    <div class="container">
        <div class="section-header">
            <h2>{{ .Params.audience.title | default "Who I Work With" }}</h2>
            <p>{{ .Params.audience.subtitle | default "I specialize in helping service businesses and consultants build sustainable growth systems." }}</p>
            {{ with .Params.audience.intro }}
                <p style="margin-top: 1.5rem; font-size: 1.1rem; color: var(--charcoal); opacity: 0.9;">{{ . }}</p>
            {{ end }}
        </div>
        <div class="grid-3">
            {{ range .Params.audience.items | default (slice (dict "icon" "icon-chart" "title" "Professional Service Firms" "description" "Marketing, IPR, law, training, education, recruitment — businesses that sell expertise and knowledge.") (dict "icon" "icon-computer" "title" "Tech-Enabled Businesses" "description" "SaaS, IT services, productized services — companies leveraging technology to deliver value at scale.") (dict "icon" "icon-target" "title" "Consultants & Experts" "description" "Growing beyond referrals — independent professionals ready to build systematic lead generation.")) }}
                <div class="audience-card">
                    <div class="card-content">
                        <div class="card-icon {{ .icon }}"></div>
                        <h3>{{ .title }}</h3>
                        {{ with .subheading }}
                            <h4 class="audience-subheading">"{{ . }}"</h4>
                        {{ end }}
                        <p>{{ .description }}</p>
                        {{ with .results }}
                            <p class="audience-results"><strong>{{ . }}</strong></p>
                        {{ end }}
                    </div>
                    {{ with .link }}
                        <div style="margin-top: auto; padding-top: 1rem;">
                            <a href="{{ .url | relURL }}" class="card-link">{{ .text }}</a>
                        </div>
                    {{ end }}
                </div>
            {{ end }}
        </div>
    </div>
</section>

<!-- Services Section -->
<section id="services" class="services">
    <div class="container">
        <div class="section-header">
            <h2>{{ .Params.services.title | default "What I Offer" }}</h2>
            <p>{{ .Params.services.subtitle | default "Multiple ways to work together, tailored to your needs and stage of growth." }}</p>
        </div>
        <div class="grid-3">
            {{ range .Params.services.items | default (slice (dict "icon" "icon-handshake" "title" "Consulting" "description" "Hands-on strategy and positioning for marketing, lead generation, and growth." "link" "consulting/") (dict "icon" "icon-graduation" "title" "Workshops" "description" "Intensive, practical sessions to build your lead generation machine." "link" "workshops/") (dict "icon" "icon-robot" "title" "AI Tools" "description" "AI-enabled tools that make marketing faster, cheaper, and more consistent." "link" "ai-solutions/")) }}
                <div class="card">
                    <div class="card-content">
                        <div class="card-icon {{ .icon }}"></div>
                        <h3>{{ .title }}</h3>
                        <p>{{ .description }}</p>
                    </div>
                    <div class="card-footer">
                        <a href="{{ .link | relURL }}" class="card-link">{{ .link_text | default "Explore" }} →</a>
                    </div>
                </div>
            {{ end }}
        </div>
    </div>
</section>

<!-- Approach Section -->
<section class="process">
    <h2 class="process__title">{{ .Params.approach.title | default "My Approach" }}</h2>
    {{ with .Params.approach.subtitle | default "My work is built on three principles that drive real results:" }}
        <p style="text-align: center; color: rgba(255, 255, 255, 0.9); max-width: 600px; margin: 0 auto 3rem; font-size: 1.125rem;">{{ . }}</p>
    {{ end }}
    <div class="process__list">
        {{ range .Params.approach.items | default (slice (dict "number" "1" "title" "Clarity before tools" "description" "Strategy first, tech second. We start with understanding your business, not picking tools.") (dict "number" "2" "title" "AI without hype" "description" "Practical, everyday workflows that cut costs and save time — no buzzwords, just results.") (dict "number" "3" "title" "Systems over heroics" "description" "Repeatable processes that outlast founder energy and scale with your team.")) }}
            <div class="process__card">
                <div class="process__num">{{ .number }}</div>
                <h3>{{ .title }}</h3>
                <p>{{ .description }}</p>
            </div>
        {{ end }}
    </div>
</section>

<!-- Testimonials Section -->
<section class="testimonials">
    <div class="container">
        <div class="section-header">
            <h2>{{ .Params.testimonials.title | default "What Clients Say" }}</h2>
            <p>{{ .Params.testimonials.subtitle | default "Real results from businesses that transformed their marketing approach." }}</p>
        </div>
        <div class="testimonial-grid">
            {{ range .Params.testimonials.items }}
                <div class="testimonial">
                    <div class="testimonial-content">
                        <p>"{{ .quote }}"</p>
                        <div class="testimonial-author">
                            <strong>{{ .author }}</strong><br>
                            <span style="color: var(--azure); font-size: 0.9rem;">{{ .role }}</span><br>
                            <span style="color: var(--charcoal); opacity: 0.8; font-size: 0.85rem;">{{ .company }}</span>
                        </div>
                    </div>
                </div>
            {{ end }}
        </div>
    </div>
</section>

<!-- Newsletter Section -->
<section id="newsletter">
    {{ partial "newsletter.html" (.Params.newsletter | default (dict)) }}
</section>

<!-- Blog Posts Section -->
{{ if .Params.blog }}
<section class="blog">
    <div class="container">
        <div class="section-header">
            <h2>{{ .Params.blog.title | default "Latest Insights" }}</h2>
            <p>{{ .Params.blog.subtitle | default "Practical strategies and AI workflows to grow your services business." }}</p>
        </div>
        <div class="blog-grid">
            {{ $posts := where .Site.RegularPages "Section" "blog" | first (.Params.blog.show_posts | default 3) }}
            {{ range $posts }}
                <article class="blog-card animate-fade-in">
                    <div class="blog-image">
                        {{ if .Params.hero_image }}
                            <img src="{{ .Params.hero_image | relURL }}" alt="{{ .Title }}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="icon-article" aria-hidden="true" style="display: none;"></div>
                        {{ else }}
                            <div class="icon-article" aria-hidden="true"></div>
                        {{ end }}
                    </div>
                    <div class="blog-content">
                        <div class="blog-meta">
                            <span>{{ .Date.Format "Jan 2, 2006" }}</span>
                            <span class="meta-dot">•</span>
                            <span>{{ .Params.read_time | default "5 min read" }}</span>
                            <span class="meta-dot">•</span>
                            <span>By <a href="{{ "about/" | relURL }}" class="author-link">{{ .Params.author | default "Anoop Kurup" }}</a></span>
                        </div>
                        <h3 class="blog-title"><a class="card-link" href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
                        <p class="blog-description">{{ .Params.description | default .Summary | truncate 140 }}</p>
                        <div class="blog-footer">
                            <a href="{{ .RelPermalink }}" class="continue-reading-btn">Continue reading →</a>
                        </div>
                    </div>
                </article>
            {{ end }}
            {{ if eq (len $posts) 0 }}
                <article class="blog-card animate-fade-in">
                    <div class="blog-image">
                        <div class="icon-article" aria-hidden="true"></div>
                    </div>
                    <div class="blog-content">
                        <div class="blog-meta">
                            <span>Coming Soon</span>
                            <span class="meta-dot">•</span>
                            <span>8 min read</span>
                            <span class="meta-dot">•</span>
                            <span>By <a href="{{ "about/" | relURL }}" class="author-link">Anoop Kurup</a></span>
                        </div>
                        <h3 class="blog-title"><a class="card-link" href="{{ "blog/" | relURL }}">Marketing Systems That Scale</a></h3>
                        <p class="blog-description">How to build marketing processes that grow with your business without burning out your team. Subscribe to get notified when this and other insights are published.</p>
                        <div class="blog-footer">
                            <a href="{{ "blog/" | relURL }}" class="continue-reading-btn">Subscribe for Updates →</a>
                        </div>
                    </div>
                </article>
            {{ end }}
        </div>
    </div>
</section>
{{ end }}

<!-- Free Resources Section -->
{{ if .Params.resources }}
<section class="services resources">
    <div class="container">
        <div class="section-header">
            <h2>{{ .Params.resources.title | default "Free Resources" }}</h2>
            <p>{{ .Params.resources.subtitle | default "Grab these tools and templates to start improving your marketing today." }}</p>
        </div>
        <div class="grid-3">
            {{ range .Params.resources.items }}
                <div class="card">
                    <div class="card-content">
                        <div class="card-icon icon-graduation"></div>
                        <h3>{{ .title }}</h3>
                        <p>{{ .description }}</p>
                        <div style="color: var(--azure); font-size: 0.9rem; font-weight: 600; margin-bottom: 1rem;">{{ .type }}</div>
                    </div>
                    <div class="card-footer">
                        <a href="{{ .link | relURL }}" class="card-link">Download Free →</a>
                    </div>
                </div>
            {{ end }}
        </div>
    </div>
</section>
{{ end }}

<!-- Final CTA Section -->
<section id="contact" class="cta">
    <div class="container">
        <h2>{{ .Params.cta.title | default "Ready to simplify your marketing and lead generation?" }}</h2>
        <p>{{ .Params.cta.subtitle | default "Let's design a system that works for your business." }}</p>
        <a href="{{ .Params.cta.button.url | default "contact/" | relURL }}" class="btn btn-primary" style="background: var(--gamboge); color: var(--oxford-blue);">{{ .Params.cta.button.text | default "Work With Me" }}</a>
    </div>
</section>
{{ end }}